(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb4a9ac6"],{"62fc":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-files"}),e._v(" 常量列表\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"显示全部"},on:{change:e.getShowState},model:{value:e.show_state,callback:function(t){e.show_state=t},expression:"show_state"}},[a("el-option",{key:"0",attrs:{label:"显示全部",value:"0"}}),a("el-option",{key:"1",attrs:{label:"待付款",value:"1"}}),a("el-option",{key:"2",attrs:{label:"待出行",value:"2"}}),a("el-option",{key:"3",attrs:{label:"交易成功(未点评)",value:"3"}}),a("el-option",{key:"4",attrs:{label:"交易成功(已点评)",value:"4"}}),a("el-option",{key:"5",attrs:{label:"交易失败(已取消)",value:"5"}}),a("el-option",{key:"6",attrs:{label:"待退款",value:"6"}}),a("el-option",{key:"7",attrs:{label:"退款成功",value:"7"}})],1),a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-left":"30px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:e.search_key_word,callback:function(t){e.search_key_word=t},expression:"search_key_word"}},[a("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"下单用户"},on:{change:e.getSearchType},slot:"prepend",model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("el-option",{attrs:{label:"下单用户",value:"0"}}),a("el-option",{attrs:{label:"产品名称",value:"1"}}),a("el-option",{attrs:{label:"下单时间",value:"2"}}),a("el-option",{attrs:{label:"处理时间",value:"3"}}),a("el-option",{attrs:{label:"联系人",value:"4"}}),a("el-option",{attrs:{label:"出行人",value:"5"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getSearchResult},slot:"append"})],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"multipleTable",attrs:{data:e.tableData,border:""},on:{select:e.handleSelection,"select-all":e.handleSelection}},[a("el-table-column",{attrs:{prop:"user_nickname",label:"用户名",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"title",label:"产品名称",width:"240",align:"center"}}),a("el-table-column",{attrs:{prop:"adult_num",label:"成人",align:"center"}}),a("el-table-column",{attrs:{prop:"child_num",label:"儿童",align:"center"}}),a("el-table-column",{attrs:{prop:"order_time",label:"下单时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(new Date(t.row.order_time).toLocaleString())+"\n                    ")]}}])}),a("el-table-column",{attrs:{prop:"link_man",label:"联系人",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",e._l(t.row.link_man,(function(t){return a("li",{key:t,staticStyle:{"list-style":"none"}},[e._v("\n                                "+e._s(t.name)+"\n                                "+e._s(e.handleSensitive(t.mobile))+"\n                            ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"passenger_ids",label:"出行人",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("ul",e._l(t.row.passenger,(function(t){return a("li",{key:t,staticStyle:{"list-style":"none"}},[e._v("\n                                "+e._s(t.name)+e._s(e.handleSensitive(t.id_card))+"\n                            ")])})),0)]}}])}),a("el-table-column",{attrs:{prop:"state",label:"订单状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{style:6===t.row.state?"cursor: pointer":"",attrs:{type:6===t.row.state?"primary":"success"},on:{click:function(a){return e.handleRefund(t.row)}}},[e._v(e._s(e.handleTags(t.row))+"\n                        ")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.state||1==t.row.state?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSub(t.row)}}},[e._v(e._s(1==t.row.state?"确认退款":2==t.row.state?"查看投诉内容":""))]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"投诉内容",visible:e.showRemark}},[e._v("\n                XXXXXXXXXXXXXXXXXXX\n                  "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",[e._v("确认撤单")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)]),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)])])},l=[],i=(a("ac6a"),a("7514"),a("a481"),a("7c15")),s={name:"OrderList",data:function(){return{showRemark:!1,query:{address:"",name:"",pageIndex:1,pageSize:10},show_state:"",tableData:[{user_nickname:"TY",adult_num:1,child_num:1,departure_time:"2020-04-23",id:1,link_man:[{mobile:"13476818230",name:"TY"}],passenger:[{mobile:"13476818230",name:"TY"}],order_time:"2020-05-23T01:52:39.000+0000",state:3,title:"三亚春节热售 豪品0自费 印象丽江+洱海大邮轮+玉龙雪山"}],pageTotal:10,isLoading:!1,categoryList:[],categoryIdMap:{},handleTitle:"",form:{},searchType:"",search_key_word:"",showType:"normalData",cityList:[],stateList:["商家同意退款","用户已投诉","交易成功（待评价）","交易成功（已点评）","交易失败（已取消）","待退款","退款成功"]}},methods:{handleSub:function(e){var t=this,a=e.state;1==a&&this.$confirm("是否确认退款","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"退款成功!"})})).catch((function(){t.$message({type:"info",message:"已取消退款"})})),2==a&&(this.showRemark=!0)},handleSensitive:function(e){return e.replace(e.substring(3,7),"****")},handleTags:function(e){return this.stateList[e.state-1]},handleRefund:function(e){var t=this;6===e.state&&this.$confirm("是否接受退款申请","提示",{distinguishCancelAndClose:!0,type:"warning",confirmButtonText:"接受",cancelButtonText:"拒绝"}).then((function(){})).catch((function(e){t.$message({type:"info",message:"cancel"===e?"拒绝退款":"关闭页面"})}))},getShowState:function(e){var t=this;0===parseInt(e)?(this.isLoading=!0,this.getTableData(),this.isLoading=!1):i["a"].searchSpecifiedOrder({attrName:"state",attrValue:e,pageNum:this.query.pageIndex,pageSize:this.query.pageSize}).then((function(e){t.tableData=e.data.orders,t.pageTotal=e.data.total,t.isLoading=!1}))},getTableData:function(){var e=this;this.isLoading=!0;var t=this;i["a"].getOrderList({pageNum:t.query.pageIndex,pageSize:t.query.pageSize}).then((function(t){e.tableData=t.data.orders,e.pageTotal=t.data.total,e.isLoading=!1,console.log(e.form)})).catch((function(e){console.log(e)}))},handleSelection:function(e){console.log(e)},handlePageChange:function(e,t){this.$set(this.query,"pageIndex",e),"normalData"===this.showType?this.getTableData():this.getSearchResult(t,e)},getSearchType:function(e){},getSearchResult:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.query.pageIndex;this.isLoading=!0;var n=["user_nickname","title","order_time","deal_time","linkMan","passenger"],l=this;this.query.pageIndex=1,this.search_key_word?(this.showType="searching",i["a"].searchSpecifiedOrder({attrName:n[this.searchType]||"user_nickname",attrValue:this.search_key_word,pageNum:a,pageSize:l.query.pageSize}).then((function(e){t.tableData=e.data.orders,t.pageTotal=e.data.total,t.isLoading=!1}))):(this.showType="normal",this.$message.error("请输入搜索内容"),this.query.pageIndex=1,this.getTableData(),this.isLoading=!1),console.log(this.showType)},uniArr:function(e){var t=e.reduce((function(e,t){return e.find((function(e){return e.category_con_id==t.category_con_id}))||e.push(t),e}),[]);return t},initCity:function(e){var t=[];return e.forEach((function(e){var a={value:e.id,label:e.city};t.push(a)})),t},pageInit:function(){var e=this;i["a"].getAllCities().then((function(t){200===t.code&&(e.cityList=e.initCity(t.data),localStorage.setItem("cityList",JSON.stringify(e.cityList)))})).catch((function(e){console.log(e)})).then((function(t){e.getTableData()}))}},created:function(){this.pageInit()}},o=s,r=(a("bec1"),a("2877")),c=Object(r["a"])(o,n,l,!1,null,"1c8e9454",null);t["default"]=c.exports},bec1:function(e,t,a){"use strict";var n=a("d88b"),l=a.n(n);l.a},d88b:function(e,t,a){}}]);