{"remainingRequest":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\QQ下载文件\\BT\\travel_manage\\src\\components\\page\\VipUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\QQ下载文件\\BT\\travel_manage\\src\\components\\page\\VipUser.vue","mtime":1594779376853},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '../../utils/api';\n\nexport default {\n    name: 'OrderList',\n    data() {\n        return {\n            value1: true,\n            query: {\n                address: '',\n                name: '',\n                pageIndex: 1,\n                pageSize: 10\n            },\n            show_state: '',\n            tableData: [],\n            pageTotal: 10,\n            isLoading: false,\n            categoryList: [],\n            categoryIdMap: {},\n            handleTitle: '',\n            form: {},\n            searchType: '',\n            search_key_word: '',\n            showType: 'normalData',\n            cityList: [],\n            stateList: ['待付款', '待出行', '交易成功（待评价）', '交易成功（已点评）', '交易失败（已取消）', '待退款', '退款成功']\n        };\n    },\n    methods: {\n        handleSensitive(number) {\n            return number.replace(number.substring(3, 7), '****');\n        },\n        handleTags(data) {\n            return this.stateList[data.state - 1];\n        },\n        handleRefund(data) {\n            if (data.state !== 6) {\n                return;\n            }\n            this.$confirm('是否接受退款申请', '提示', {\n                distinguishCancelAndClose: true,\n                type: 'warning',\n                confirmButtonText: '接受',\n                cancelButtonText: '拒绝'\n            })\n                .then(() => {\n\n                })\n                .catch(action => {\n                    this.$message({\n                        type: 'info',\n                        message: action === 'cancel'\n                            ? '拒绝退款'\n                            : '关闭页面'\n                    })\n                });\n        },\n        getShowState(e) {\n            if (parseInt(e) === 0) {\n                this.isLoading = true;\n                this.getTableData();\n                this.isLoading = false;\n            } else {\n                api.searchSpecifiedOrder({\n                    attrName: 'state',\n                    attrValue: e,\n                    pageNum: this.query.pageIndex,\n                    pageSize: this.query.pageSize\n                }).then(res => {\n                    this.tableData = res.data.orders;\n                    this.pageTotal = res.data.total;\n                    this.isLoading = false;\n                });\n            }\n\n        },\n        getTableData() {\n            this.isLoading = true;\n            var that = this;\n            api.getOrderList({\n                pageNum: that.query.pageIndex,\n                pageSize: that.query.pageSize\n            }).then(res0 => {\n                this.tableData = res0.data.orders;\n                this.tableData = this.tableData.concat(this.tableData)\n                this.pageTotal = res0.data.total;\n                this.isLoading = false;\n                console.log(this.form);\n            }).catch(err => {\n                console.log(err);\n            });\n        },\n        handleSelection(e) {\n            console.log(e);\n        },\n        handlePageChange(val, e) {\n            this.$set(this.query, 'pageIndex', val);\n            if (this.showType === 'normalData') {\n                this.getTableData();\n            } else {\n                this.getSearchResult(e, val);\n            }\n\n        },\n        getSearchType(e) {\n\n        },\n        getSearchResult(e, pageNum = this.query.pageIndex) {\n            this.isLoading = true;\n            var list = ['user_nickname', 'title', 'order_time', 'deal_time', 'linkMan', 'passenger'];\n            var that = this;\n            this.query.pageIndex = 1;\n            if (this.search_key_word) {\n                this.showType = 'searching';\n                api.searchSpecifiedOrder({\n                    attrName: list[this.searchType] || 'user_nickname',\n                    attrValue: this.search_key_word,\n                    pageNum: pageNum,\n                    pageSize: that.query.pageSize\n                }).then(res => {\n                    this.tableData = res.data.orders;\n                    this.pageTotal = res.data.total;\n                    this.isLoading = false;\n                });\n\n            } else {\n                this.showType = 'normal';\n                this.$message.error('请输入搜索内容');\n                this.query.pageIndex = 1;\n                this.getTableData();\n                this.isLoading = false;\n            }\n            console.log(this.showType);\n\n        },\n        //数组去重\n        uniArr(arr) {\n            var obj = {};\n            var new_arr = arr.reduce(function(prev, element) {\n                if (!prev.find(el => el.category_con_id == element.category_con_id)) {\n                    prev.push(element);\n                }\n                return prev;\n            }, []);\n            return new_arr;\n        },\n        //初始化城市列表\n        initCity(cityList) {\n            var cl = [];\n            cityList.forEach(c => {\n                var t = {\n                    value: c.id,\n                    label: c.city\n                };\n                cl.push(t);\n            });\n            return cl;\n        },\n        pageInit() {\n            api.getAllCities().then(res => {\n                if (res.code === 200) {\n                    this.cityList = this.initCity(res.data);\n                    localStorage.setItem('cityList', JSON.stringify(this.cityList));\n                }\n            }).catch(err => {\n                console.log(err);\n            }).then(res => {\n                this.getTableData();\n            });\n        }\n    },\n    created() {\n        this.pageInit();\n    }\n};\n",{"version":3,"sources":["VipUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VipUser.vue","sourceRoot":"src/components/page","sourcesContent":["/**\r\n* @Description: 订单显示\r\n* @Author: TankNee\r\n* @Date: 2/24/2020 7:45 PM\r\n**/\r\n<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb>\r\n                <el-breadcrumb-item>\r\n                    <i class=\"el-icon-files\"></i> 常量列表\r\n                </el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-select v-model=\"show_state\" placeholder=\"显示全部\" class=\"handle-select mr10\" @change=\"getShowState\">\r\n                    <el-option key=\"0\" label=\"正常\" value=\"0\"></el-option>\r\n                    <el-option key=\"1\" label=\"已禁用\" value=\"1\"></el-option>\r\n                </el-select>\r\n                <el-input style=\"margin-left: 30px\" placeholder=\"请输入内容\" v-model=\"search_key_word\"\r\n                          class=\"input-with-select\" clearable>\r\n                    <el-select style=\"width: 110px;\" v-model=\"searchType\" slot=\"prepend\"\r\n                               placeholder=\"会员名称\" @change=\"getSearchType\">\r\n                        <el-option label=\"会员名称\" value=\"0\"></el-option>\r\n                        <el-option label=\"会员手机号\" value=\"1\"></el-option>\r\n                    </el-select>\r\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getSearchResult\"></el-button>\r\n                </el-input>\r\n            </div>\r\n            <div>\r\n                <el-table\r\n                        :data=\"tableData\"\r\n                        v-loading=\"isLoading\"\r\n                        border\r\n                       \r\n                        ref=\"multipleTable\"\r\n                        @select=\"handleSelection\"\r\n                        @select-all=\"handleSelection\"\r\n                >\r\n                    <!-- <el-table-column type=\"selection\" width=\"60\" align=\"center\"></el-table-column> -->\r\n                    <el-table-column prop=\"user_nickname\" label=\"用户名\" width=\"100\" align=\"center\"></el-table-column>\r\n                    <el-table-column prop=\"title\" label=\"手机号\" width=\"100\" align=\"center\">\r\n                        <template>\r\n                            13474654877\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"adult_num\" label=\"一级会员总量\"  align=\"center\">\r\n                        <template>\r\n                            13\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"二级会员总量\"  align=\"center\">\r\n                        <template>\r\n                            56\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"已完成订单总量\" width=\"130\" align=\"center\">\r\n                        <template>\r\n                            25\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"赚取佣金总量\"  align=\"center\">\r\n                        <template>\r\n                            ￥348.9\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"注册时间\" width=\"160\"  align=\"center\">\r\n                        <template>\r\n                            2020-02-03 12:23:33\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"最近登录时间\" width=\"160\" align=\"center\">\r\n                         <template>\r\n                            2020-06-03 12:23:33\r\n                        </template>                       \r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"最近登录地址\"  align=\"center\">\r\n                        <template>\r\n                            127.0.0.1\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"child_num\" label=\"账号状态\" width=\"180\" align=\"center\">\r\n                        <template>\r\n                            <el-switch v-model=\"value1\" active-text=\"正常\" inactive-text=\"已禁用\"></el-switch>\r\n                            </template>\r\n                    </el-table-column>\r\n                    \r\n                </el-table>\r\n                <div class=\"pagination\">\r\n                    <el-pagination\r\n                            background\r\n                            layout=\"total, prev, pager, next\"\r\n                            :current-page=\"query.pageIndex\"\r\n                            :page-size=\"query.pageSize\"\r\n                            :total=\"pageTotal\"\r\n                            @current-change=\"handlePageChange\"\r\n                    ></el-pagination>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import api from '../../utils/api';\r\n\r\n    export default {\r\n        name: 'OrderList',\r\n        data() {\r\n            return {\r\n                value1: true,\r\n                query: {\r\n                    address: '',\r\n                    name: '',\r\n                    pageIndex: 1,\r\n                    pageSize: 10\r\n                },\r\n                show_state: '',\r\n                tableData: [],\r\n                pageTotal: 10,\r\n                isLoading: false,\r\n                categoryList: [],\r\n                categoryIdMap: {},\r\n                handleTitle: '',\r\n                form: {},\r\n                searchType: '',\r\n                search_key_word: '',\r\n                showType: 'normalData',\r\n                cityList: [],\r\n                stateList: ['待付款', '待出行', '交易成功（待评价）', '交易成功（已点评）', '交易失败（已取消）', '待退款', '退款成功']\r\n            };\r\n        },\r\n        methods: {\r\n            handleSensitive(number) {\r\n                return number.replace(number.substring(3, 7), '****');\r\n            },\r\n            handleTags(data) {\r\n                return this.stateList[data.state - 1];\r\n            },\r\n            handleRefund(data) {\r\n                if (data.state !== 6) {\r\n                    return;\r\n                }\r\n                this.$confirm('是否接受退款申请', '提示', {\r\n                    distinguishCancelAndClose: true,\r\n                    type: 'warning',\r\n                    confirmButtonText: '接受',\r\n                    cancelButtonText: '拒绝'\r\n                })\r\n                    .then(() => {\r\n\r\n                    })\r\n                    .catch(action => {\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: action === 'cancel'\r\n                                ? '拒绝退款'\r\n                                : '关闭页面'\r\n                        })\r\n                    });\r\n            },\r\n            getShowState(e) {\r\n                if (parseInt(e) === 0) {\r\n                    this.isLoading = true;\r\n                    this.getTableData();\r\n                    this.isLoading = false;\r\n                } else {\r\n                    api.searchSpecifiedOrder({\r\n                        attrName: 'state',\r\n                        attrValue: e,\r\n                        pageNum: this.query.pageIndex,\r\n                        pageSize: this.query.pageSize\r\n                    }).then(res => {\r\n                        this.tableData = res.data.orders;\r\n                        this.pageTotal = res.data.total;\r\n                        this.isLoading = false;\r\n                    });\r\n                }\r\n\r\n            },\r\n            getTableData() {\r\n                this.isLoading = true;\r\n                var that = this;\r\n                api.getOrderList({\r\n                    pageNum: that.query.pageIndex,\r\n                    pageSize: that.query.pageSize\r\n                }).then(res0 => {\r\n                    this.tableData = res0.data.orders;\r\n                    this.tableData = this.tableData.concat(this.tableData)\r\n                    this.pageTotal = res0.data.total;\r\n                    this.isLoading = false;\r\n                    console.log(this.form);\r\n                }).catch(err => {\r\n                    console.log(err);\r\n                });\r\n            },\r\n            handleSelection(e) {\r\n                console.log(e);\r\n            },\r\n            handlePageChange(val, e) {\r\n                this.$set(this.query, 'pageIndex', val);\r\n                if (this.showType === 'normalData') {\r\n                    this.getTableData();\r\n                } else {\r\n                    this.getSearchResult(e, val);\r\n                }\r\n\r\n            },\r\n            getSearchType(e) {\r\n\r\n            },\r\n            getSearchResult(e, pageNum = this.query.pageIndex) {\r\n                this.isLoading = true;\r\n                var list = ['user_nickname', 'title', 'order_time', 'deal_time', 'linkMan', 'passenger'];\r\n                var that = this;\r\n                this.query.pageIndex = 1;\r\n                if (this.search_key_word) {\r\n                    this.showType = 'searching';\r\n                    api.searchSpecifiedOrder({\r\n                        attrName: list[this.searchType] || 'user_nickname',\r\n                        attrValue: this.search_key_word,\r\n                        pageNum: pageNum,\r\n                        pageSize: that.query.pageSize\r\n                    }).then(res => {\r\n                        this.tableData = res.data.orders;\r\n                        this.pageTotal = res.data.total;\r\n                        this.isLoading = false;\r\n                    });\r\n\r\n                } else {\r\n                    this.showType = 'normal';\r\n                    this.$message.error('请输入搜索内容');\r\n                    this.query.pageIndex = 1;\r\n                    this.getTableData();\r\n                    this.isLoading = false;\r\n                }\r\n                console.log(this.showType);\r\n\r\n            },\r\n            //数组去重\r\n            uniArr(arr) {\r\n                var obj = {};\r\n                var new_arr = arr.reduce(function(prev, element) {\r\n                    if (!prev.find(el => el.category_con_id == element.category_con_id)) {\r\n                        prev.push(element);\r\n                    }\r\n                    return prev;\r\n                }, []);\r\n                return new_arr;\r\n            },\r\n            //初始化城市列表\r\n            initCity(cityList) {\r\n                var cl = [];\r\n                cityList.forEach(c => {\r\n                    var t = {\r\n                        value: c.id,\r\n                        label: c.city\r\n                    };\r\n                    cl.push(t);\r\n                });\r\n                return cl;\r\n            },\r\n            pageInit() {\r\n                api.getAllCities().then(res => {\r\n                    if (res.code === 200) {\r\n                        this.cityList = this.initCity(res.data);\r\n                        localStorage.setItem('cityList', JSON.stringify(this.cityList));\r\n                    }\r\n                }).catch(err => {\r\n                    console.log(err);\r\n                }).then(res => {\r\n                    this.getTableData();\r\n                });\r\n            }\r\n        },\r\n        created() {\r\n            this.pageInit();\r\n        }\r\n    };\r\n</script>\r\n<style scoped>\r\n    .handle-box {\r\n        margin-bottom: 20px;\r\n        display: flex;\r\n    }\r\n\r\n    .dialog-footer {\r\n        right: 30px;\r\n    }\r\n</style>\r\n"]}]}