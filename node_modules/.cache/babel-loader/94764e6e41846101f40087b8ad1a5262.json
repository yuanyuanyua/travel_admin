{"remainingRequest":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\babel-loader\\lib\\index.js!D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\QQ下载文件\\BT\\travel_manage\\src\\components\\page\\adminInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\QQ下载文件\\BT\\travel_manage\\src\\components\\page\\adminInfo.vue","mtime":1578548151589},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\QQ下载文件\\BT\\travel_manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VueCropper from 'vue-cropperjs';\nexport default {\n  components: {\n    VueCropper: VueCropper\n  },\n  data: function data() {\n    return {\n      userInfo: \"\",\n      imgSrc: '',\n      cropImg: \"\",\n      dialogVisible: false\n    };\n  },\n  created: function created() {\n    this.cropImg = this.userInfo.avatar == null ? require(\"../../assets/img/img.jpg\") : this.base_api_url + this.userInfo.avatar;\n    this.userInfo = JSON.parse(localStorage.getItem('userInfo'));\n  },\n  methods: {\n    upAvatar: function upAvatar() {\n      var that = this;\n      this.dialogVisible = false;\n      this.api.upAvatar({\n        avatar: this.cropImg\n      }).then(function (res) {\n        if (res.code == \"200\") {\n          that.cropImg = that.base_api_url + res.data;\n          var userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n          userInfo.avatar = that.cropImg;\n          localStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\n        }\n      });\n    },\n    setImage: function setImage(e) {\n      var _this = this;\n\n      var file = e.target.files[0];\n\n      if (!file.type.includes('image/')) {\n        return;\n      }\n\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        _this.dialogVisible = true;\n        _this.imgSrc = event.target.result;\n        _this.$refs.cropper && _this.$refs.cropper.replace(event.target.result);\n      };\n\n      reader.readAsDataURL(file);\n    },\n    cropImage: function cropImage() {\n      this.cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\n    },\n    cancelCrop: function cancelCrop() {\n      this.dialogVisible = false;\n      this.cropImg = this.userInfo.avatar == null ? require(\"../../assets/img/img.jpg\") : this.base_api_url + this.userInfo.avatar;\n    }\n  }\n};",{"version":3,"sources":["adminInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,UAAA,MAAA,eAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,aAAA,EAAA;AAJA,KAAA;AAMA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,SAAA,OAAA,GAAA,KAAA,QAAA,CAAA,MAAA,IAAA,IAAA,GAAA,OAAA,4BAAA,GAAA,KAAA,YAAA,GAAA,KAAA,QAAA,CAAA,MAAA;AACA,SAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;AACA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,GAAA,CAAA,QAAA,CAAA;AAAA,QAAA,MAAA,EAAA,KAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,IAAA,KAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,GAAA,IAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA;AACA,cAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,CAAA,CAAA;AACA,UAAA,QAAA,CAAA,MAAA,GAAA,IAAA,CAAA,OAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA;AACA;AACA,OAPA;AAQA,KAZA;AAaA,IAAA,QAbA,oBAaA,CAbA,EAaA;AAAA;;AACA,UAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;AACA,UAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,QAAA,CAAA,EAAA;AACA;AACA;;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA;AACA,OAJA;;AAKA,MAAA,MAAA,CAAA,aAAA,CAAA,IAAA;AACA,KAzBA;AA0BA,IAAA,SA1BA,uBA0BA;AACA,WAAA,OAAA,GAAA,KAAA,KAAA,CAAA,OAAA,CAAA,gBAAA,GAAA,SAAA,EAAA;AACA,KA5BA;AA6BA,IAAA,UA7BA,wBA6BA;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,OAAA,GAAA,KAAA,QAAA,CAAA,MAAA,IAAA,IAAA,GAAA,OAAA,4BAAA,GAAA,KAAA,YAAA,GAAA,KAAA,QAAA,CAAA,MAAA;AACA;AAhCA;AAhBA,CAAA","sourcesContent":["<template>\r\n    <el-card shadow=\"hover\" class=\"mgb20\" style=\"height:252px;\">\r\n        <div class=\"user-info\">\r\n            <img :src=\"cropImg\" \r\n            class=\"user-avator\" alt />\r\n            <div class=\"crop-demo-btn\">更换图片\r\n                <input class=\"crop-input\" type=\"file\" name=\"image\" accept=\"image/*\" @change=\"setImage\"/>\r\n            </div>\r\n            <el-dialog title=\"裁剪图片\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n                <vue-cropper ref='cropper' :src=\"imgSrc\" :ready=\"cropImage\" :zoom=\"cropImage\" :cropmove=\"cropImage\" style=\"width:100%;height:300px;\"></vue-cropper>\r\n                <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"cancelCrop\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"upAvatar\">确 定</el-button>\r\n                </span>\r\n            </el-dialog>\r\n            <div class=\"user-info-cont\">\r\n                <div class=\"user-info-name\">{{userInfo.nickname}}</div>\r\n                <div>超级管理员</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"user-info-list\">\r\n            上次登录时间：\r\n            <span>{{userInfo.last_login_time}}</span>\r\n        </div>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\nimport VueCropper  from 'vue-cropperjs';\r\nexport default {\r\n    components: {\r\n        VueCropper\r\n    },\r\n    data(){\r\n        return {\r\n            userInfo : \"\",\r\n            imgSrc: '',\r\n            cropImg: \"\",\r\n            dialogVisible: false,\r\n        }\r\n    },\r\n    created(){\r\n        this.cropImg = this.userInfo.avatar == null?require('../../assets/img/img.jpg'):this.base_api_url +this.userInfo.avatar\r\n        this.userInfo = JSON.parse(localStorage.getItem('userInfo'))\r\n    },\r\n    methods:{\r\n        upAvatar(){\r\n            var that = this\r\n            this.dialogVisible = false\r\n            this.api.upAvatar({avatar:this.cropImg}).then(res => {\r\n                if(res.code==\"200\"){\r\n                    that.cropImg = that.base_api_url + res.data\r\n                    var userInfo =JSON.parse(localStorage.getItem(\"userInfo\")) \r\n                    userInfo.avatar = that.cropImg\r\n                    localStorage.setItem(\"userInfo\",JSON.stringify(userInfo))\r\n                }\r\n            })\r\n        },\r\n        setImage(e){\r\n            const file = e.target.files[0];\r\n            if (!file.type.includes('image/')) {\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onload = (event) => {\r\n                this.dialogVisible = true;\r\n                this.imgSrc = event.target.result;\r\n                this.$refs.cropper && this.$refs.cropper.replace(event.target.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        },\r\n        cropImage () {\r\n            this.cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\r\n        },\r\n        cancelCrop(){\r\n            this.dialogVisible = false;\r\n            this.cropImg = this.userInfo.avatar == null?require('../../assets/img/img.jpg'):this.base_api_url +this.userInfo.avatar;\r\n        },\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-info {\r\n    display: flex;\r\n    align-items: center;\r\n    padding-bottom: 20px;\r\n    border-bottom: 2px solid #ccc;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.user-avator {\r\n    width: 120px;\r\n    height: 120px;\r\n    border-radius: 50%;\r\n}\r\n\r\n.user-info-cont {\r\n    padding-left: 50px;\r\n    flex: 1;\r\n    font-size: 14px;\r\n    color: #999;\r\n}\r\n\r\n.user-info-cont div:first-child {\r\n    font-size: 30px;\r\n    color: #222;\r\n}\r\n\r\n.user-info-list {\r\n    font-size: 14px;\r\n    color: #999;\r\n    line-height: 25px;\r\n}\r\n\r\n.user-info-list span {\r\n    margin-left: 70px;\r\n}\r\n.mgb20 {\r\n    margin-bottom: 20px;\r\n}\r\n    .crop-demo-btn{\r\n        position: relative;\r\n        width: 100px;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        padding: 0 20px;\r\n        margin-left: 30px;\r\n        background-color: #409eff;\r\n        color: #fff;\r\n        font-size: 14px;\r\n        border-radius: 4px;\r\n        box-sizing: border-box;\r\n    }\r\n    .crop-input{\r\n        position: absolute;\r\n        width: 100px;\r\n        height: 40px;\r\n        left: 0;\r\n        top: 0;\r\n        opacity: 0;\r\n        cursor: pointer;\r\n    }\r\n</style>"],"sourceRoot":"src/components/page"}]}